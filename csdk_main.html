<!DOCTYPE html>
<html style="height: 100%; width: 100%">
  <head>
    <title>Aurora Solar Client SDK Demo</title>
  </head>
  <body style="height: 100%; width: 100%">
    <h3>My Aurora Solar Client SDK Demo</h3>
    <!--The div element for the Aurora CAD view -->
    <div style="height: 100%; width: 100%" id="cad-element"></div>

    <script type="module">

        var myHeaders = new Headers();
        myHeaders.append("Authorization", "Bearer sk_sand_e3cccb9b7236924b258488bc");
        myHeaders.append("Cookie", "_aurorasolar_session=a1Ziamp6eFlyRndPclFtRitoWndLdFRsSWhyNm4yMUgrMHdFcDE0N0kwMDJ0OU5tTjJCVDJmSE40djFnZkhGQTZCeWlzcDEvcjg4VkNaMlB1aG9EZUJHL3Y2MTdzb2ExSzhDUS85M2E1NnRBRUJNMmJzS1ZSWE9ZV21ORGNCYnEtLTgzeTdVazVNc2RVa2FqK1MxNlNVWUE9PQ%3D%3D--1a34fcfd0ad288e1f7bd86bdeaf837bfcef11472");

        var requestOptions = {
        method: 'POST',
        headers: myHeaders,
        redirect: 'follow'
        };

        fetch("https://api-sandbox.aurorasolar.com/tenants/16d565a6-1bce-4ccb-b322-a5b89c3527c2/users/efe9050d-ff4c-467d-a8cf-569eefc4cf37/generate_token", requestOptions)
        .then(response => response.text())
        .then(result => console.log(result))
        .catch(error => console.log('error', error));
        //const tenant_id = '16d565a6-1bce-4ccb-b322-a5b89c3527c2';
        //const jwt = "";
        //const user_id = 'efe9050d-ff4c-467d-a8cf-569eefc4cf37';
        //const options = {
        //    method: 'POST',
          //  headers: {
            //  accept: 'application/json',
              //'content-type': 'application/json',
              //authorization: 'Bearer sk_sand_e3cccb9b7236924b258488bc'
           // }
          //};
          //console.log("url: " + 'https://api-sandbox.aurorasolar.com/tenants/' + tenant_id + '/users/' + user_id + '/generate_token')
          //const response = await fetch('https://api-sandbox.aurorasolar.com/tenants/' + tenant_id + '/users/' + user_id + '/generate_token', options)
            //.then(response => console.log(response))
            //.catch(err => console.error(err));
        
        //jwt = response['token']['jwt'];
        //console.log("jwt: " + jwt);
        
      const library = await import(
        'https://aurora-sdk.s3.amazonaws.com/client-sdk-loader.next.js'
      );

      const sdk = await library.load({
        token: jwt,
        // or just user name and password when testing in sandbox
        // username: '<user>',
        // password: '<password>',
      });

      console.log('SDK loaded', sdk);

      // Saving to window for testing
      window.sdk = sdk;
      sdk.cad.attach('#cad-element');

      // Saving to window for testing
      window.design = await sdk.design.load('d7c63b38-87d2-42a6-bef7-24f3cc233857');
    </script>
  </body>
</html>