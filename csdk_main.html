<!DOCTYPE html>
<html style="height: 100%; width: 100%">
  <head>
    <title>Aurora Solar Client SDK Demo</title>
  </head>
  <body style="height: 100%; width: 100%">
    <h3>My Aurora Solar Client SDK Demo</h3>
    <!--The div element for the Aurora CAD view -->
    <div style="height: 100%; width: 100%" id="cad-element"></div>

    <script type="module">
        const tenant_id = '16d565a6-1bce-4ccb-b322-a5b89c3527c2';
        
        const user_id = 'efe9050d-ff4c-467d-a8cf-569eefc4cf37';
        const options = {
            method: 'POST',
            headers: {
              accept: 'application/json',
              'content-type': 'application/json',
              authorization: 'Bearer sk_sand_e3cccb9b7236924b258488bc'
            }
          };
          
          fetch('https://api-sandbox.aurorasolar.com/tenants/' + tenant_id + '/users/' + user_id + '/generate_token', options)
            .then(response => response.json())
            .then(response => console.log(response))
            .catch(err => console.error(err));
        const jwt = response['token']['jwt'];
        console.log("jwt: " + jwt);
        
      const library = await import(
        'https://aurora-sdk.s3.amazonaws.com/client-sdk-loader.next.js'
      );

      const sdk = await library.load({
        token: jwt,
        // or just user name and password when testing in sandbox
        // username: '<user>',
        // password: '<password>',
      });

      console.log('SDK loaded', sdk);

      // Saving to window for testing
      window.sdk = sdk;
      sdk.cad.attach('#cad-element');

      // Saving to window for testing
      window.design = await sdk.design.load('d7c63b38-87d2-42a6-bef7-24f3cc233857');
    </script>
  </body>
</html>